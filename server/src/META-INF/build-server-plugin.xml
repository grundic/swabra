<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">

<beans default-autowire="constructor">
  <bean id="testReportParserPluginSettings"
        class="jetbrains.buildServer.swabra.web.SwabraSettings" init-method="registerExtensions">
    <property name="supportedRunTypes">
      <list>
        <value>simpleRunner</value>
        <value>Ant</value>
        <value>Duplicator</value>
        <value>FxCop</value>
        <value>Inspection</value>
        <value>Ipr</value>
        <value>Maven2</value>
        <value>MSBuild</value>
        <value>NAnt</value>
        <value>rake-runner</value>
        <value>sln2003</value>
        <value>VS.Solution</value>
        <value>dotnet-dupfinder</value>
      </list>
    </property>
  </bean>

  <bean class="jetbrains.buildServer.swabra.web.actions.UploadAction"/>
  <bean class="jetbrains.buildServer.swabra.web.actions.DownloadAction"/>

  <bean class="jetbrains.buildServer.swabra.web.HandleController" init-method="register"/>

  <bean class="jetbrains.buildServer.swabra.HandleProvider"/>

  <bean id="serverRootPath" class="org.springframework.beans.factory.config.MethodInvokingFactoryBean">
    <property name="targetObject">
      <ref bean="buildServer"/>
    </property>
    <property name="targetMethod">
      <value>getServerRootPath</value>
    </property>
  </bean>

  <bean id="setSwabraPluginsFolder" class="org.springframework.beans.factory.config.MethodInvokingFactoryBean">
    <property name="staticMethod"
              value="jetbrains.buildServer.swabra.HandleProvider.initPluginFile"/>
    <property name="arguments">
      <list>
        <ref local="serverRootPath"/>
      </list>
    </property>
  </bean>
</beans>
